#!/bin/bash
# 変数の宣言は不要だが、未定義だとuntilで警告が出る
year=0
month=0
day=0
max=(31 29 31 30 31 30 31 31 30 31 30 31)

until [ $year -ge 1 ] && [ $year -le 3000 ]; do
		read -p "生まれた年は？>>>" year
done

until [ $month -ge 1 ] && [ $month -le 12 ]; do
		read -p "生まれた月は？>>>" month
done

until [ $day -ge 1 ] && [ $day -le ${max[(( $month - 1 ))]} ]; do
		read -p "生まれた日は？>>>" day
done

<< COMMENTOUT
                        指定数表（一部）
┏━━━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┳━━┓
┃年月┃ 1┃ 2┃ 3┃ 4┃ 5┃ 6┃ 7┃ 8┃ 9┃10┃11┃12┃（１）生まれた「年」と「月」から、
┣━━━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━╋━━┫　　　指定数を見つける。　　
┃1975┃43┃14┃42┃13┃43┃14┃44┃15┃46┃16┃47┃17┃
┃1976┃48┃19┃48┃19┃49┃20┃50┃21┃52┃22┃53┃23┃（２）その数に「日」を足す。
┃1977┃54┃25┃53┃24┃54┃25┃55┃26┃57┃27┃58┃28┃
┃1978┃59┃30┃58┃29┃59┃30┃60┃31┃ 2┃32┃ 3┃33┃（３）もし、数が６１以上に
┃1979┃ 4┃35┃ 3┃34┃ 4┃35┃ 5┃36┃ 7┃37┃ 8┃38┃　　　なったら、６０を引く。
┃1980┃ 9┃40┃ 9┃40┃10┃41┃11┃42┃13┃43┃14┃44┃
┃1981┃15┃46┃14┃45┃15┃46┃16┃47┃18┃48┃19┃49┃
┃1982┃20┃51┃19┃50┃20┃51┃21┃52┃23┃53┃24┃54┃
┃1983┃25┃56┃24┃55┃25┃56┃26┃57┃28┃58┃29┃59┃
┃1984┃30┃ 1┃30┃ 1┃31┃ 2┃32┃ 3┃34┃ 4┃35┃ 5┃
┃1985┃36┃ 7┃35┃ 6┃36┃ 7┃37┃ 8┃39┃ 9┃40┃10┃
┗━━━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┻━━┛
COMMENTOUT

appointed=$(( $(( 5 * year + year / 4 + 54 )) % 60 )) #その年の3月の値

case $month in
		1)
				if [ $(( $year % 4 )) -ne 0 ]; then (( appointed += 1 )) ;
				fi
				;;
		2)
				if [ $(( $year % 4 )) -eq 0 ]; then (( appointed += 31 ))
				else (( appointed += 32 ))
				fi
				;;
		3)
				# 何もしない
				;;
		4|6|8|10|12)
				(( appointed += $(( $(( month - 4 )) / 2 + 31 )) ))
				;;
		5|7|9|11)
				(( appointed += $(( $(( month - 3 )) / 2 + month / 9 )) ))
				;;
		*)
				echo "不正な月の入力"
				;;
esac

(( appointed += day ))
(( appointed %= 60 ))


<< COMMENTOUT
┏━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━┳━━━━━━━━━━━━━━━━━┓
┃ 動物 ┃　　 指定数 　　┃　動物　┃　　　指定数　 　┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃チータ┃1  7 42 48　　　┃子鹿　　┃11 17 32 38　　  ┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃狸　　┃2  8 41 47　　　┃象　　　┃12 18 31 37　 　 ┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃猿　　┃3  9 15 34 40 46┃狼  　　┃13 19 24 25 30 36┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃コアラ┃4 10 16 33 39 45┃羊      ┃14 20 23 29 35　 ┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃黒豹　┃5 44 50 53 56 59┃ペガサス┃21 22 27 28　 　 ┃
┣━━━━━━╋━━━━━━━━━━━━━━━━╋━━━━━━━━╋━━━━━━━━━━━━━━━━━┫
┃虎　　┃6 43 49 54 55 60┃ライオン┃51 52 57 58　　  ┃
┗━━━━━━┻━━━━━━━━━━━━━━━━┻━━━━━━━━┻━━━━━━━━━━━━━━━━━┛
COMMENTOUT

case $appointed in
		1|7|42|48) result=0 ;;
		2|8|41|47) result=1 ;;
		3|9|15|34|40|46) result=2 ;;
		4|10|16|33|39|45) result=3 ;;
		5|44|50|53|56|59) result=4 ;;
		6|43|49|54|55|0) result=5 ;;
		11|17|32|38) result=6 ;;
		12|18|31|37) result=7 ;;
		13|19|24|25|30|36) result=8 ;;
		14|20|23|26|29|35) result=9 ;;
		21|22|27|28) result=10 ;;
		51|52|57|58) result=11 ;;
		*) echo "不正な指定数" ;;
esac

animal=("チータ" "狸" "猿" "コアラ" "黒豹" "虎" "子鹿" "象" "狼" "羊" "ペガサス" "ライオン")

echo "${year}年${month}月${day}日生まれ 指定数${appointed} 動物は${animal[$result]}"
